{"id":"zPzN","dependencies":[{"name":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\package.json","includedInParent":true,"mtime":1599140682947},{"name":"dotenv","loc":{"line":16,"column":16},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\aggregator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\dotenv\\lib\\main.js"},{"name":"aws-sdk","loc":{"line":17,"column":28},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\aggregator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\aws-sdk\\lib\\aws.js"}],"generated":{"js":"function e(e,o){if(!(e instanceof o))throw new TypeError(\"Cannot call a class as a function\")}function o(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}var t=function(){function o(){e(this,o)}return n(o,[{key:\"uploadToAws\",value:function(e,o,n,t){require(\"dotenv\").config();var a=require(\"aws-sdk\");this.updateStatus(\".upload-status\",\"Uploading file to AWS\");var i=e.bucket,u=e.bucketRegion,r=e.identityPoolId;a.config.region=u,a.config.credentials=new a.CognitoIdentityCredentials({IdentityPoolId:r});var l={Bucket:i,Key:t,Body:n};new a.S3({apiVersion:\"2006-03-01\",params:{Bucket:i}}).upload(l,function(e,o){if(e)throw console.log(\".upload-status\",\"File was not uploaded. \".concat(e));console.log(\".upload-status\",\"File uploaded successfully to \".concat(o.Location))})}}]),o}();"},"sourceMaps":{"js":{"mappings":[{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":0}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":9}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":11}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":13}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":16}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":21}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":34}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":37}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":43}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":47}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":57}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":94}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":103}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":105}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":107}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":110}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":114}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":118}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":120}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":122}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":124}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":126}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":133}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":137}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":138}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":142}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":144}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":146}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":149}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":151}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":162}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":164}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":177}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":179}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":181}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":195}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":197}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":207}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":211}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":213}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":223}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":226}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":233}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":248}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":250}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":252}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":256}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":260}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":269}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":271}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":273}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":275}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":278}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":285}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":288}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":290}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":292}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":302}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":305}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":308}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":310}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":312}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":315}},{"source":"aggregator.js","name":"AggregatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":317}},{"source":"aggregator.js","name":"AggregatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":321}},{"source":"aggregator.js","name":"AggregatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":323}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":334}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":343}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":347}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":349}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":354}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":357}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":364}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":366}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":368}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":369}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":370}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":374}},{"source":"aggregator.js","name":"state","original":{"line":15,"column":16},"generated":{"line":1,"column":388}},{"source":"aggregator.js","name":"state","original":{"line":15,"column":16},"generated":{"line":1,"column":394}},{"source":"aggregator.js","name":"state","original":{"line":15,"column":16},"generated":{"line":1,"column":403}},{"source":"aggregator.js","name":"dictionary","original":{"line":15,"column":23},"generated":{"line":1,"column":405}},{"source":"aggregator.js","name":"file","original":{"line":15,"column":35},"generated":{"line":1,"column":407}},{"source":"aggregator.js","name":"docTitle","original":{"line":15,"column":41},"generated":{"line":1,"column":409}},{"source":"aggregator.js","name":"require","original":{"line":16,"column":8},"generated":{"line":1,"column":412}},{"source":"aggregator.js","original":{"line":16,"column":16},"generated":{"line":1,"column":420}},{"source":"aggregator.js","name":"config","original":{"line":16,"column":26},"generated":{"line":1,"column":430}},{"source":"aggregator.js","name":"AWS","original":{"line":17,"column":14},"generated":{"line":1,"column":439}},{"source":"aggregator.js","name":"AWS","original":{"line":17,"column":14},"generated":{"line":1,"column":443}},{"source":"aggregator.js","name":"require","original":{"line":17,"column":20},"generated":{"line":1,"column":445}},{"source":"aggregator.js","original":{"line":17,"column":28},"generated":{"line":1,"column":453}},{"source":"aggregator.js","name":"updateStatus","original":{"line":19,"column":13},"generated":{"line":1,"column":464}},{"source":"aggregator.js","name":"updateStatus","original":{"line":19,"column":13},"generated":{"line":1,"column":469}},{"source":"aggregator.js","original":{"line":19,"column":26},"generated":{"line":1,"column":482}},{"source":"aggregator.js","original":{"line":15,"column":51},"generated":{"line":1,"column":499}},{"source":"aggregator.js","name":"bucket","original":{"line":22,"column":14},"generated":{"line":1,"column":524}},{"source":"aggregator.js","name":"bucket","original":{"line":22,"column":14},"generated":{"line":1,"column":528}},{"source":"aggregator.js","name":"state","original":{"line":22,"column":23},"generated":{"line":1,"column":530}},{"source":"aggregator.js","name":"bucket","original":{"line":22,"column":29},"generated":{"line":1,"column":532}},{"source":"aggregator.js","name":"bucketRegion","original":{"line":23,"column":14},"generated":{"line":1,"column":539}},{"source":"aggregator.js","name":"state","original":{"line":23,"column":29},"generated":{"line":1,"column":541}},{"source":"aggregator.js","name":"bucketRegion","original":{"line":23,"column":35},"generated":{"line":1,"column":543}},{"source":"aggregator.js","name":"identityPoolId","original":{"line":24,"column":14},"generated":{"line":1,"column":556}},{"source":"aggregator.js","name":"state","original":{"line":24,"column":31},"generated":{"line":1,"column":558}},{"source":"aggregator.js","name":"identityPoolId","original":{"line":24,"column":37},"generated":{"line":1,"column":560}},{"source":"aggregator.js","name":"AWS","original":{"line":27,"column":8},"generated":{"line":1,"column":575}},{"source":"aggregator.js","name":"config","original":{"line":27,"column":12},"generated":{"line":1,"column":577}},{"source":"aggregator.js","name":"region","original":{"line":27,"column":19},"generated":{"line":1,"column":584}},{"source":"aggregator.js","name":"bucketRegion","original":{"line":27,"column":28},"generated":{"line":1,"column":591}},{"source":"aggregator.js","name":"AWS","original":{"line":28,"column":8},"generated":{"line":1,"column":593}},{"source":"aggregator.js","name":"config","original":{"line":28,"column":12},"generated":{"line":1,"column":595}},{"source":"aggregator.js","name":"credentials","original":{"line":28,"column":19},"generated":{"line":1,"column":602}},{"source":"aggregator.js","original":{"line":28,"column":33},"generated":{"line":1,"column":614}},{"source":"aggregator.js","name":"AWS","original":{"line":28,"column":37},"generated":{"line":1,"column":618}},{"source":"aggregator.js","name":"CognitoIdentityCredentials","original":{"line":28,"column":41},"generated":{"line":1,"column":620}},{"source":"aggregator.js","original":{"line":28,"column":68},"generated":{"line":1,"column":647}},{"source":"aggregator.js","name":"IdentityPoolId","original":{"line":29,"column":12},"generated":{"line":1,"column":648}},{"source":"aggregator.js","name":"identityPoolId","original":{"line":29,"column":28},"generated":{"line":1,"column":663}},{"source":"aggregator.js","name":"s3","original":{"line":33,"column":14},"generated":{"line":1,"column":667}},{"source":"aggregator.js","name":"params","original":{"line":41,"column":14},"generated":{"line":1,"column":671}},{"source":"aggregator.js","original":{"line":41,"column":23},"generated":{"line":1,"column":673}},{"source":"aggregator.js","name":"Bucket","original":{"line":42,"column":12},"generated":{"line":1,"column":674}},{"source":"aggregator.js","name":"bucket","original":{"line":42,"column":20},"generated":{"line":1,"column":681}},{"source":"aggregator.js","name":"Key","original":{"line":43,"column":12},"generated":{"line":1,"column":683}},{"source":"aggregator.js","name":"docTitle","original":{"line":43,"column":17},"generated":{"line":1,"column":687}},{"source":"aggregator.js","name":"Body","original":{"line":44,"column":12},"generated":{"line":1,"column":689}},{"source":"aggregator.js","name":"file","original":{"line":44,"column":18},"generated":{"line":1,"column":694}},{"source":"aggregator.js","original":{"line":33,"column":19},"generated":{"line":1,"column":697}},{"source":"aggregator.js","name":"AWS","original":{"line":33,"column":23},"generated":{"line":1,"column":701}},{"source":"aggregator.js","name":"S3","original":{"line":33,"column":27},"generated":{"line":1,"column":703}},{"source":"aggregator.js","original":{"line":33,"column":30},"generated":{"line":1,"column":706}},{"source":"aggregator.js","name":"apiVersion","original":{"line":34,"column":12},"generated":{"line":1,"column":707}},{"source":"aggregator.js","original":{"line":34,"column":24},"generated":{"line":1,"column":718}},{"source":"aggregator.js","name":"params","original":{"line":35,"column":12},"generated":{"line":1,"column":731}},{"source":"aggregator.js","original":{"line":35,"column":20},"generated":{"line":1,"column":738}},{"source":"aggregator.js","name":"Bucket","original":{"line":36,"column":16},"generated":{"line":1,"column":739}},{"source":"aggregator.js","name":"bucket","original":{"line":36,"column":24},"generated":{"line":1,"column":746}},{"source":"aggregator.js","name":"upload","original":{"line":48,"column":11},"generated":{"line":1,"column":751}},{"source":"aggregator.js","name":"params","original":{"line":48,"column":18},"generated":{"line":1,"column":758}},{"source":"aggregator.js","original":{"line":48,"column":26},"generated":{"line":1,"column":760}},{"source":"aggregator.js","name":"err","original":{"line":48,"column":36},"generated":{"line":1,"column":769}},{"source":"aggregator.js","name":"data","original":{"line":48,"column":41},"generated":{"line":1,"column":771}},{"source":"aggregator.js","name":"err","original":{"line":49,"column":16},"generated":{"line":1,"column":774}},{"source":"aggregator.js","name":"err","original":{"line":49,"column":16},"generated":{"line":1,"column":777}},{"source":"aggregator.js","name":"err","original":{"line":50,"column":22},"generated":{"line":1,"column":779}},{"source":"aggregator.js","name":"console","original":{"line":51,"column":20},"generated":{"line":1,"column":785}},{"source":"aggregator.js","name":"log","original":{"line":51,"column":28},"generated":{"line":1,"column":793}},{"source":"aggregator.js","original":{"line":51,"column":32},"generated":{"line":1,"column":797}},{"source":"aggregator.js","name":"err","original":{"line":51,"column":76},"generated":{"line":1,"column":814}},{"source":"aggregator.js","name":"err","original":{"line":51,"column":76},"generated":{"line":1,"column":840}},{"source":"aggregator.js","name":"err","original":{"line":51,"column":76},"generated":{"line":1,"column":847}},{"source":"aggregator.js","name":"console","original":{"line":53,"column":12},"generated":{"line":1,"column":851}},{"source":"aggregator.js","name":"log","original":{"line":53,"column":20},"generated":{"line":1,"column":859}},{"source":"aggregator.js","original":{"line":53,"column":24},"generated":{"line":1,"column":863}},{"source":"aggregator.js","name":"data","original":{"line":53,"column":75},"generated":{"line":1,"column":880}},{"source":"aggregator.js","name":"data","original":{"line":53,"column":75},"generated":{"line":1,"column":913}},{"source":"aggregator.js","name":"data","original":{"line":53,"column":75},"generated":{"line":1,"column":920}},{"source":"aggregator.js","name":"Location","original":{"line":53,"column":80},"generated":{"line":1,"column":922}},{"source":"aggregator.js","original":{"line":56,"column":5},"generated":{"line":1,"column":939}},{"source":"aggregator.js","name":"AggregatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":941}}],"sources":{"aggregator.js":"class AggregatorEngine {\r\n\r\n\r\n    /* HELPER FUNCTIONS */\r\n\r\n\r\n\r\n    /* AGGREGATOR FUNCTIONS */\r\n\r\n\r\n\r\n    /* UPLOAD FUNCTIONS */\r\n\r\n    // Upload a file to AWS\r\n    uploadToAws(state, dictionary, file, docTitle) {\r\n        require('dotenv').config();\r\n        const AWS = require('aws-sdk');\r\n\r\n        this.updateStatus(\".upload-status\", `Uploading file to AWS`)\r\n\r\n        // Environment variables\r\n        const bucket = state.bucket;\r\n        const bucketRegion = state.bucketRegion;\r\n        const identityPoolId = state.identityPoolId;\r\n\r\n        // Config AWS\r\n        AWS.config.region = bucketRegion;\r\n        AWS.config.credentials = new AWS.CognitoIdentityCredentials({\r\n            IdentityPoolId: identityPoolId,\r\n        });\r\n\r\n        // New S3 instance\r\n        const s3 = new AWS.S3({\r\n            apiVersion: '2006-03-01',\r\n            params: {\r\n                Bucket: bucket\r\n            }\r\n        });\r\n\r\n        // Set up S3 upload parameters\r\n        const params = {\r\n            Bucket: bucket,\r\n            Key: docTitle, // File name you want to save as in S3\r\n            Body: file,\r\n        };\r\n\r\n        // Upload files to the bucket\r\n        s3.upload(params, function (err, data) {\r\n            if (err) {\r\n                throw err,\r\n                    console.log(\".upload-status\", `File was not uploaded. ${err}`)\r\n            }\r\n            console.log(\".upload-status\", `File uploaded successfully to ${data.Location}`);\r\n        });\r\n\r\n    }\r\n\r\n}"},"lineCount":null}},"error":null,"hash":"f50e857df7eb174cfde6f79b1ca6ff1f","cacheData":{"env":{}}}