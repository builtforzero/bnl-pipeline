{"id":"VnKd","dependencies":[{"name":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\package.json","includedInParent":true,"mtime":1599140682947},{"name":"string-similarity","loc":{"line":13,"column":41},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\validator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\string-similarity\\src\\index.js"},{"name":"validatorjs","loc":{"line":47,"column":34},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\validator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\validatorjs\\src\\validator.js"}],"generated":{"js":"function e(e,a){if(!(e instanceof a))throw new TypeError(\"Cannot call a class as a function\")}function a(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}var t=function(){function a(n,t,r,o,c,u){e(this,a)}return n(a,[{key:\"fuzzyMatchTerm\",value:function(e,a){var n=require(\"string-similarity\").findBestMatch(e,a);return n.bestMatch.rating<=.25?\"No Match\":n.bestMatch.target}},{key:\"fuzzyMatchArray\",value:function(e,a){for(var n=[],t=0;t<e.length;t++){var r=this.fuzzyMatchTerm(e[t],a);n.push(r)}return n}},{key:\"cleanArray\",value:function(e){for(var a=[],n=0;n<e.length;n++){var t=e[n].replace(/[^A-Z0-9]/gi,\" \").toLowerCase();a.push(t)}return a}},{key:\"validateData\",value:function(e,a,n){var t=require(\"validatorjs\");console.log(\"validateData function\");var r=new t(e,a,n);return console.log(\"Passed validation?\",r.passes()),Object.values(r.errors.errors)}},{key:\"updateKeys\",value:function(e,a){for(var n=0;n<e.length;n++)a[n]=e[n],console.log(\"Matched \".concat(e[n],\" with \").concat(a[n]))}},{key:\"checkHeaders\",value:function(e,a,n){var t=this.fuzzyMatchArray(a.headers,n.headers),r=Object.keys(e.raw[0]);this.updateKeys(r,t),console.log(\"Old keys\",Object.keys(e.raw[0])),console.log(\"New keys\",t)}},{key:\"checkRequired\",value:function(){console.log(\"Checking required columns are filled in\")}},{key:\"checkDataType\",value:function(){console.log(\"Checking data types\")}},{key:\"fuzzyMatchPicklists\",value:function(){console.log(\"Fuzzy-matching picklist columns\")}},{key:\"getSubpop\",value:function(e,a,n){for(var t=[],r=0;r<e.length;r++)if(\"single adult\"===e[r]&&\"chronic\"===a[r]&&\"no\"===n[r]){t.push(\"chronic\")}return t}}]),a}();"},"sourceMaps":{"js":{"mappings":[{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":0}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":9}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":11}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":13}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":16}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":21}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":34}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":37}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":43}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":47}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":57}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":94}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":103}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":105}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":107}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":110}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":114}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":118}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":120}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":122}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":124}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":126}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":133}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":137}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":138}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":142}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":144}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":146}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":149}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":151}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":162}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":164}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":177}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":179}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":181}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":195}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":197}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":207}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":211}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":213}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":223}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":226}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":233}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":248}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":250}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":252}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":256}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":260}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":269}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":271}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":273}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":275}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":278}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":285}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":288}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":290}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":292}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":302}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":305}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":308}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":310}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":312}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":315}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":317}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":321}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":323}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":334}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":343}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":345}},{"source":"validator.js","name":"dictionary","original":{"line":3,"column":23},"generated":{"line":1,"column":347}},{"source":"validator.js","name":"rules","original":{"line":3,"column":35},"generated":{"line":1,"column":349}},{"source":"validator.js","name":"input","original":{"line":3,"column":42},"generated":{"line":1,"column":351}},{"source":"validator.js","name":"metadata","original":{"line":3,"column":49},"generated":{"line":1,"column":353}},{"source":"validator.js","name":"customErrorMessages","original":{"line":3,"column":59},"generated":{"line":1,"column":355}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":358}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":360}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":365}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":368}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":375}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":377}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":379}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":380}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":381}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":385}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":402}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":408}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":417}},{"source":"validator.js","name":"dictionary","original":{"line":12,"column":31},"generated":{"line":1,"column":419}},{"source":"validator.js","name":"stringSimilarity","original":{"line":13,"column":14},"generated":{"line":1,"column":422}},{"source":"validator.js","name":"a","original":{"line":14,"column":14},"generated":{"line":1,"column":426}},{"source":"validator.js","name":"require","original":{"line":13,"column":33},"generated":{"line":1,"column":428}},{"source":"validator.js","original":{"line":13,"column":41},"generated":{"line":1,"column":436}},{"source":"validator.js","name":"findBestMatch","original":{"line":14,"column":35},"generated":{"line":1,"column":457}},{"source":"validator.js","name":"searchTerm","original":{"line":14,"column":49},"generated":{"line":1,"column":471}},{"source":"validator.js","name":"dictionary","original":{"line":14,"column":61},"generated":{"line":1,"column":473}},{"source":"validator.js","name":"a","original":{"line":17,"column":12},"generated":{"line":1,"column":476}},{"source":"validator.js","name":"a","original":{"line":17,"column":12},"generated":{"line":1,"column":483}},{"source":"validator.js","name":"bestMatch","original":{"line":17,"column":14},"generated":{"line":1,"column":485}},{"source":"validator.js","name":"rating","original":{"line":17,"column":24},"generated":{"line":1,"column":495}},{"source":"validator.js","original":{"line":17,"column":34},"generated":{"line":1,"column":503}},{"source":"validator.js","original":{"line":18,"column":19},"generated":{"line":1,"column":507}},{"source":"validator.js","name":"a","original":{"line":20,"column":19},"generated":{"line":1,"column":518}},{"source":"validator.js","name":"bestMatch","original":{"line":20,"column":21},"generated":{"line":1,"column":520}},{"source":"validator.js","name":"target","original":{"line":20,"column":31},"generated":{"line":1,"column":530}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":539}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":540}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":544}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":562}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":568}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":577}},{"source":"validator.js","name":"dictionary","original":{"line":25,"column":30},"generated":{"line":1,"column":579}},{"source":"validator.js","original":{"line":27,"column":13},"generated":{"line":1,"column":582}},{"source":"validator.js","name":"matchedArray","original":{"line":26,"column":14},"generated":{"line":1,"column":586}},{"source":"validator.js","name":"matchedArray","original":{"line":26,"column":14},"generated":{"line":1,"column":590}},{"source":"validator.js","original":{"line":26,"column":29},"generated":{"line":1,"column":592}},{"source":"validator.js","name":"i","original":{"line":27,"column":17},"generated":{"line":1,"column":595}},{"source":"validator.js","original":{"line":27,"column":21},"generated":{"line":1,"column":597}},{"source":"validator.js","name":"i","original":{"line":27,"column":24},"generated":{"line":1,"column":599}},{"source":"validator.js","name":"rawArray","original":{"line":27,"column":28},"generated":{"line":1,"column":601}},{"source":"validator.js","name":"length","original":{"line":27,"column":37},"generated":{"line":1,"column":603}},{"source":"validator.js","name":"i","original":{"line":27,"column":45},"generated":{"line":1,"column":610}},{"source":"validator.js","original":{"line":27,"column":50},"generated":{"line":1,"column":614}},{"source":"validator.js","name":"match","original":{"line":28,"column":18},"generated":{"line":1,"column":615}},{"source":"validator.js","name":"match","original":{"line":28,"column":18},"generated":{"line":1,"column":619}},{"source":"validator.js","original":{"line":28,"column":26},"generated":{"line":1,"column":621}},{"source":"validator.js","name":"fuzzyMatchTerm","original":{"line":28,"column":31},"generated":{"line":1,"column":626}},{"source":"validator.js","name":"rawArray","original":{"line":28,"column":46},"generated":{"line":1,"column":641}},{"source":"validator.js","name":"i","original":{"line":28,"column":55},"generated":{"line":1,"column":643}},{"source":"validator.js","name":"dictionary","original":{"line":28,"column":59},"generated":{"line":1,"column":646}},{"source":"validator.js","name":"matchedArray","original":{"line":29,"column":12},"generated":{"line":1,"column":649}},{"source":"validator.js","name":"push","original":{"line":29,"column":25},"generated":{"line":1,"column":651}},{"source":"validator.js","name":"match","original":{"line":29,"column":30},"generated":{"line":1,"column":656}},{"source":"validator.js","name":"matchedArray","original":{"line":31,"column":15},"generated":{"line":1,"column":659}},{"source":"validator.js","name":"matchedArray","original":{"line":31,"column":15},"generated":{"line":1,"column":666}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":670}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":671}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":675}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":688}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":694}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":703}},{"source":"validator.js","original":{"line":37,"column":13},"generated":{"line":1,"column":706}},{"source":"validator.js","name":"cleanArr","original":{"line":36,"column":14},"generated":{"line":1,"column":710}},{"source":"validator.js","name":"cleanArr","original":{"line":36,"column":14},"generated":{"line":1,"column":714}},{"source":"validator.js","original":{"line":36,"column":25},"generated":{"line":1,"column":716}},{"source":"validator.js","name":"i","original":{"line":37,"column":17},"generated":{"line":1,"column":719}},{"source":"validator.js","original":{"line":37,"column":21},"generated":{"line":1,"column":721}},{"source":"validator.js","name":"i","original":{"line":37,"column":24},"generated":{"line":1,"column":723}},{"source":"validator.js","name":"rawArray","original":{"line":37,"column":28},"generated":{"line":1,"column":725}},{"source":"validator.js","name":"length","original":{"line":37,"column":37},"generated":{"line":1,"column":727}},{"source":"validator.js","name":"i","original":{"line":37,"column":45},"generated":{"line":1,"column":734}},{"source":"validator.js","original":{"line":37,"column":50},"generated":{"line":1,"column":738}},{"source":"validator.js","name":"cleanItem","original":{"line":38,"column":18},"generated":{"line":1,"column":739}},{"source":"validator.js","name":"cleanItem","original":{"line":38,"column":18},"generated":{"line":1,"column":743}},{"source":"validator.js","name":"rawArray","original":{"line":38,"column":30},"generated":{"line":1,"column":745}},{"source":"validator.js","name":"i","original":{"line":38,"column":39},"generated":{"line":1,"column":747}},{"source":"validator.js","name":"replace","original":{"line":38,"column":42},"generated":{"line":1,"column":750}},{"source":"validator.js","original":{"line":38,"column":50},"generated":{"line":1,"column":758}},{"source":"validator.js","original":{"line":38,"column":65},"generated":{"line":1,"column":772}},{"source":"validator.js","name":"toLowerCase","original":{"line":38,"column":70},"generated":{"line":1,"column":777}},{"source":"validator.js","name":"cleanArr","original":{"line":39,"column":12},"generated":{"line":1,"column":791}},{"source":"validator.js","name":"push","original":{"line":39,"column":21},"generated":{"line":1,"column":793}},{"source":"validator.js","name":"cleanItem","original":{"line":39,"column":26},"generated":{"line":1,"column":798}},{"source":"validator.js","name":"cleanArr","original":{"line":41,"column":15},"generated":{"line":1,"column":801}},{"source":"validator.js","name":"cleanArr","original":{"line":41,"column":15},"generated":{"line":1,"column":808}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":812}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":813}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":817}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":832}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":838}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":847}},{"source":"validator.js","name":"rules","original":{"line":46,"column":23},"generated":{"line":1,"column":849}},{"source":"validator.js","name":"customErrorMessages","original":{"line":46,"column":30},"generated":{"line":1,"column":851}},{"source":"validator.js","name":"Validator","original":{"line":47,"column":14},"generated":{"line":1,"column":854}},{"source":"validator.js","name":"Validator","original":{"line":47,"column":14},"generated":{"line":1,"column":858}},{"source":"validator.js","name":"require","original":{"line":47,"column":26},"generated":{"line":1,"column":860}},{"source":"validator.js","original":{"line":47,"column":34},"generated":{"line":1,"column":868}},{"source":"validator.js","name":"console","original":{"line":48,"column":8},"generated":{"line":1,"column":883}},{"source":"validator.js","name":"log","original":{"line":48,"column":16},"generated":{"line":1,"column":891}},{"source":"validator.js","original":{"line":48,"column":20},"generated":{"line":1,"column":895}},{"source":"validator.js","name":"validation","original":{"line":49,"column":12},"generated":{"line":1,"column":920}},{"source":"validator.js","name":"validation","original":{"line":49,"column":12},"generated":{"line":1,"column":924}},{"source":"validator.js","original":{"line":49,"column":25},"generated":{"line":1,"column":926}},{"source":"validator.js","name":"Validator","original":{"line":49,"column":29},"generated":{"line":1,"column":930}},{"source":"validator.js","name":"data","original":{"line":49,"column":39},"generated":{"line":1,"column":932}},{"source":"validator.js","name":"rules","original":{"line":49,"column":45},"generated":{"line":1,"column":934}},{"source":"validator.js","name":"customErrorMessages","original":{"line":49,"column":52},"generated":{"line":1,"column":936}},{"source":"validator.js","name":"Object","original":{"line":51,"column":15},"generated":{"line":1,"column":939}},{"source":"validator.js","name":"console","original":{"line":50,"column":8},"generated":{"line":1,"column":946}},{"source":"validator.js","name":"log","original":{"line":50,"column":16},"generated":{"line":1,"column":954}},{"source":"validator.js","original":{"line":50,"column":20},"generated":{"line":1,"column":958}},{"source":"validator.js","name":"validation","original":{"line":50,"column":42},"generated":{"line":1,"column":979}},{"source":"validator.js","name":"passes","original":{"line":50,"column":53},"generated":{"line":1,"column":981}},{"source":"validator.js","name":"Object","original":{"line":51,"column":15},"generated":{"line":1,"column":991}},{"source":"validator.js","name":"values","original":{"line":51,"column":22},"generated":{"line":1,"column":998}},{"source":"validator.js","name":"validation","original":{"line":51,"column":29},"generated":{"line":1,"column":1005}},{"source":"validator.js","name":"errors","original":{"line":51,"column":40},"generated":{"line":1,"column":1007}},{"source":"validator.js","name":"errors","original":{"line":51,"column":47},"generated":{"line":1,"column":1014}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1024}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1025}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1029}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1042}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1048}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1057}},{"source":"validator.js","name":"newArr","original":{"line":55,"column":23},"generated":{"line":1,"column":1059}},{"source":"validator.js","original":{"line":56,"column":13},"generated":{"line":1,"column":1062}},{"source":"validator.js","original":{"line":56,"column":13},"generated":{"line":1,"column":1066}},{"source":"validator.js","name":"i","original":{"line":56,"column":17},"generated":{"line":1,"column":1070}},{"source":"validator.js","original":{"line":56,"column":21},"generated":{"line":1,"column":1072}},{"source":"validator.js","name":"i","original":{"line":56,"column":24},"generated":{"line":1,"column":1074}},{"source":"validator.js","name":"oldArr","original":{"line":56,"column":28},"generated":{"line":1,"column":1076}},{"source":"validator.js","name":"length","original":{"line":56,"column":35},"generated":{"line":1,"column":1078}},{"source":"validator.js","name":"i","original":{"line":56,"column":43},"generated":{"line":1,"column":1085}},{"source":"validator.js","name":"newArr","original":{"line":57,"column":12},"generated":{"line":1,"column":1089}},{"source":"validator.js","name":"i","original":{"line":57,"column":19},"generated":{"line":1,"column":1091}},{"source":"validator.js","name":"oldArr","original":{"line":57,"column":24},"generated":{"line":1,"column":1094}},{"source":"validator.js","name":"i","original":{"line":57,"column":31},"generated":{"line":1,"column":1096}},{"source":"validator.js","name":"console","original":{"line":58,"column":12},"generated":{"line":1,"column":1099}},{"source":"validator.js","name":"log","original":{"line":58,"column":20},"generated":{"line":1,"column":1107}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1111}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1122}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1129}},{"source":"validator.js","name":"i","original":{"line":58,"column":42},"generated":{"line":1,"column":1131}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1134}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1144}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1151}},{"source":"validator.js","name":"i","original":{"line":58,"column":60},"generated":{"line":1,"column":1153}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1160}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1161}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1165}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1180}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1186}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1195}},{"source":"validator.js","name":"metadata","original":{"line":67,"column":24},"generated":{"line":1,"column":1197}},{"source":"validator.js","name":"dictionary","original":{"line":67,"column":34},"generated":{"line":1,"column":1199}},{"source":"validator.js","name":"matchedHeaders","original":{"line":68,"column":12},"generated":{"line":1,"column":1202}},{"source":"validator.js","name":"matchedHeaders","original":{"line":68,"column":12},"generated":{"line":1,"column":1206}},{"source":"validator.js","original":{"line":68,"column":29},"generated":{"line":1,"column":1208}},{"source":"validator.js","name":"fuzzyMatchArray","original":{"line":68,"column":34},"generated":{"line":1,"column":1213}},{"source":"validator.js","name":"metadata","original":{"line":68,"column":50},"generated":{"line":1,"column":1229}},{"source":"validator.js","name":"headers","original":{"line":68,"column":59},"generated":{"line":1,"column":1231}},{"source":"validator.js","name":"dictionary","original":{"line":68,"column":68},"generated":{"line":1,"column":1239}},{"source":"validator.js","name":"headers","original":{"line":68,"column":79},"generated":{"line":1,"column":1241}},{"source":"validator.js","name":"originalHeaders","original":{"line":69,"column":12},"generated":{"line":1,"column":1250}},{"source":"validator.js","name":"Object","original":{"line":69,"column":30},"generated":{"line":1,"column":1252}},{"source":"validator.js","name":"keys","original":{"line":69,"column":37},"generated":{"line":1,"column":1259}},{"source":"validator.js","name":"state","original":{"line":69,"column":42},"generated":{"line":1,"column":1264}},{"source":"validator.js","name":"raw","original":{"line":69,"column":48},"generated":{"line":1,"column":1266}},{"source":"validator.js","original":{"line":69,"column":52},"generated":{"line":1,"column":1270}},{"source":"validator.js","name":"updateKeys","original":{"line":70,"column":13},"generated":{"line":1,"column":1274}},{"source":"validator.js","name":"updateKeys","original":{"line":70,"column":13},"generated":{"line":1,"column":1279}},{"source":"validator.js","name":"originalHeaders","original":{"line":70,"column":24},"generated":{"line":1,"column":1290}},{"source":"validator.js","name":"matchedHeaders","original":{"line":70,"column":41},"generated":{"line":1,"column":1292}},{"source":"validator.js","name":"console","original":{"line":71,"column":8},"generated":{"line":1,"column":1295}},{"source":"validator.js","name":"log","original":{"line":71,"column":16},"generated":{"line":1,"column":1303}},{"source":"validator.js","original":{"line":71,"column":20},"generated":{"line":1,"column":1307}},{"source":"validator.js","name":"Object","original":{"line":71,"column":32},"generated":{"line":1,"column":1318}},{"source":"validator.js","name":"keys","original":{"line":71,"column":39},"generated":{"line":1,"column":1325}},{"source":"validator.js","name":"state","original":{"line":71,"column":44},"generated":{"line":1,"column":1330}},{"source":"validator.js","name":"raw","original":{"line":71,"column":50},"generated":{"line":1,"column":1332}},{"source":"validator.js","original":{"line":71,"column":54},"generated":{"line":1,"column":1336}},{"source":"validator.js","name":"console","original":{"line":72,"column":8},"generated":{"line":1,"column":1341}},{"source":"validator.js","name":"log","original":{"line":72,"column":16},"generated":{"line":1,"column":1349}},{"source":"validator.js","original":{"line":72,"column":20},"generated":{"line":1,"column":1353}},{"source":"validator.js","name":"matchedHeaders","original":{"line":72,"column":32},"generated":{"line":1,"column":1364}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1369}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1370}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1374}},{"source":"validator.js","original":{"line":76,"column":20},"generated":{"line":1,"column":1390}},{"source":"validator.js","original":{"line":76,"column":20},"generated":{"line":1,"column":1396}},{"source":"validator.js","name":"console","original":{"line":77,"column":8},"generated":{"line":1,"column":1407}},{"source":"validator.js","name":"log","original":{"line":77,"column":16},"generated":{"line":1,"column":1415}},{"source":"validator.js","original":{"line":77,"column":20},"generated":{"line":1,"column":1419}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1464}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1465}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1469}},{"source":"validator.js","original":{"line":81,"column":20},"generated":{"line":1,"column":1485}},{"source":"validator.js","original":{"line":81,"column":20},"generated":{"line":1,"column":1491}},{"source":"validator.js","name":"console","original":{"line":82,"column":8},"generated":{"line":1,"column":1502}},{"source":"validator.js","name":"log","original":{"line":82,"column":16},"generated":{"line":1,"column":1510}},{"source":"validator.js","original":{"line":82,"column":20},"generated":{"line":1,"column":1514}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1539}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1540}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1544}},{"source":"validator.js","original":{"line":86,"column":26},"generated":{"line":1,"column":1566}},{"source":"validator.js","original":{"line":86,"column":26},"generated":{"line":1,"column":1572}},{"source":"validator.js","name":"console","original":{"line":87,"column":8},"generated":{"line":1,"column":1583}},{"source":"validator.js","name":"log","original":{"line":87,"column":16},"generated":{"line":1,"column":1591}},{"source":"validator.js","original":{"line":87,"column":20},"generated":{"line":1,"column":1595}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1632}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1633}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1637}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1649}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1655}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1664}},{"source":"validator.js","name":"chronicArray","original":{"line":91,"column":29},"generated":{"line":1,"column":1666}},{"source":"validator.js","name":"veteranArray","original":{"line":91,"column":43},"generated":{"line":1,"column":1668}},{"source":"validator.js","original":{"line":93,"column":13},"generated":{"line":1,"column":1671}},{"source":"validator.js","name":"subpopArray","original":{"line":92,"column":14},"generated":{"line":1,"column":1675}},{"source":"validator.js","name":"subpopArray","original":{"line":92,"column":14},"generated":{"line":1,"column":1679}},{"source":"validator.js","original":{"line":92,"column":28},"generated":{"line":1,"column":1681}},{"source":"validator.js","name":"i","original":{"line":93,"column":17},"generated":{"line":1,"column":1684}},{"source":"validator.js","original":{"line":93,"column":21},"generated":{"line":1,"column":1686}},{"source":"validator.js","name":"i","original":{"line":93,"column":24},"generated":{"line":1,"column":1688}},{"source":"validator.js","name":"householdType","original":{"line":93,"column":28},"generated":{"line":1,"column":1690}},{"source":"validator.js","name":"length","original":{"line":93,"column":42},"generated":{"line":1,"column":1692}},{"source":"validator.js","name":"i","original":{"line":93,"column":50},"generated":{"line":1,"column":1699}},{"source":"validator.js","name":"householdType","original":{"line":94,"column":16},"generated":{"line":1,"column":1703}},{"source":"validator.js","original":{"line":94,"column":37},"generated":{"line":1,"column":1706}},{"source":"validator.js","name":"householdType","original":{"line":94,"column":16},"generated":{"line":1,"column":1723}},{"source":"validator.js","name":"i","original":{"line":94,"column":30},"generated":{"line":1,"column":1725}},{"source":"validator.js","original":{"line":94,"column":75},"generated":{"line":1,"column":1729}},{"source":"validator.js","name":"chronicArray","original":{"line":94,"column":55},"generated":{"line":1,"column":1741}},{"source":"validator.js","name":"i","original":{"line":94,"column":68},"generated":{"line":1,"column":1743}},{"source":"validator.js","original":{"line":94,"column":108},"generated":{"line":1,"column":1747}},{"source":"validator.js","name":"veteranArray","original":{"line":94,"column":88},"generated":{"line":1,"column":1754}},{"source":"validator.js","name":"i","original":{"line":94,"column":101},"generated":{"line":1,"column":1756}},{"source":"validator.js","original":{"line":94,"column":114},"generated":{"line":1,"column":1759}},{"source":"validator.js","name":"subpopArray","original":{"line":96,"column":16},"generated":{"line":1,"column":1760}},{"source":"validator.js","name":"push","original":{"line":96,"column":28},"generated":{"line":1,"column":1762}},{"source":"validator.js","original":{"line":95,"column":24},"generated":{"line":1,"column":1767}},{"source":"validator.js","name":"subpopArray","original":{"line":99,"column":15},"generated":{"line":1,"column":1778}},{"source":"validator.js","name":"subpopArray","original":{"line":99,"column":15},"generated":{"line":1,"column":1785}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1791}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":1793}}],"sources":{"validator.js":"class ValidatorEngine {\r\n\r\n    constructor(state, dictionary, rules, input, metadata, customErrorMessages) {\r\n\r\n    }\r\n\r\n\r\n\r\n    /* HELPER FUNCTIONS */\r\n\r\n    // Return the single dictionary term that most closely resembles the search term\r\n    fuzzyMatchTerm(searchTerm, dictionary) {\r\n        const stringSimilarity = require('string-similarity');\r\n        const a = stringSimilarity.findBestMatch(searchTerm, dictionary);\r\n\r\n        // If the Dice's coefficient falls below threshold, return null\r\n        if (a.bestMatch.rating <= 0.25) {\r\n            return \"No Match\"\r\n        } else {\r\n            return a.bestMatch.target;\r\n        }\r\n    }\r\n\r\n    // Takes a raw array and dictionary and returns a fuzzy-matched array\r\n    fuzzyMatchArray(rawArray, dictionary) {\r\n        const matchedArray = [];\r\n        for (let i = 0; i < rawArray.length; i++) {\r\n            const match = this.fuzzyMatchTerm(rawArray[i], dictionary);\r\n            matchedArray.push(match);\r\n        }\r\n        return matchedArray;\r\n    }\r\n\r\n    // For every item in the array, change to lowercase and remove special characters. Returns newly cleaned array\r\n    cleanArray(rawArray) {\r\n        const cleanArr = [];\r\n        for (let i = 0; i < rawArray.length; i++) {\r\n            const cleanItem = rawArray[i].replace(/[^A-Z0-9]/ig, \" \").toLowerCase()\r\n            cleanArr.push(cleanItem)\r\n        }\r\n        return cleanArr;\r\n    }\r\n\r\n\r\n    // Validates a data source against a set of rules, and then returns pass / fail\r\n    validateData(data, rules, customErrorMessages) {\r\n        const Validator = require('validatorjs');\r\n        console.log(\"validateData function\")\r\n        let validation = new Validator(data, rules, customErrorMessages)\r\n        console.log(\"Passed validation?\", validation.passes())\r\n        return Object.values(validation.errors.errors)\r\n    }\r\n\r\n    // Updates an object's keys\r\n    updateKeys(oldArr, newArr) {\r\n        for (let i = 0; i < oldArr.length; i++) {\r\n            newArr[i] = oldArr[i];\r\n            console.log(`Matched ${oldArr[i]} with ${newArr[i]}`)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /* VALIDATION FUNCTIONS */\r\n\r\n    // Checks that the data file contains the right headers\r\n    checkHeaders(state, metadata, dictionary) {\r\n        let matchedHeaders = this.fuzzyMatchArray(metadata.headers, dictionary.headers)\r\n        let originalHeaders = Object.keys(state.raw[0])\r\n        this.updateKeys(originalHeaders, matchedHeaders)\r\n        console.log(\"Old keys\", Object.keys(state.raw[0]))\r\n        console.log(\"New keys\", matchedHeaders)\r\n    }\r\n\r\n    // Checks that required columns are 100% filled in\r\n    checkRequired() {\r\n        console.log(\"Checking required columns are filled in\")\r\n    }\r\n\r\n    // Checks that each column contains the right data type\r\n    checkDataType() {\r\n        console.log(\"Checking data types\")\r\n    }\r\n\r\n    // Generates a fuzzy-matched version of each picklist column\r\n    fuzzyMatchPicklists() {\r\n        console.log(\"Fuzzy-matching picklist columns\")\r\n    }\r\n\r\n    // Calculates subpopulation from fuzzy-matched chronic and veteran status\r\n    getSubpop(householdType, chronicArray, veteranArray) {\r\n        const subpopArray = [];\r\n        for (let i = 0; i < householdType.length; i++) {\r\n            if (householdType[i] === \"single adult\" && chronicArray[i] === \"chronic\" && veteranArray[i] === \"no\") {\r\n                let s = \"chronic\";\r\n                subpopArray.push(s);\r\n            }\r\n        }\r\n        return subpopArray;\r\n    }\r\n\r\n\r\n\r\n}"},"lineCount":null}},"error":null,"hash":"7001838f3d444bdbe13f257f97ef56eb","cacheData":{"env":{}}}