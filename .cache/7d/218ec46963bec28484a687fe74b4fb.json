{"id":"VnKd","dependencies":[{"name":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\package.json","includedInParent":true,"mtime":1598559661504},{"name":"string-similarity","loc":{"line":13,"column":41},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\validator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\string-similarity\\src\\index.js"},{"name":"validatorjs","loc":{"line":47,"column":34},"parent":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\client\\validator.js","resolved":"C:\\Users\\Kavya\\Desktop\\Community Solutions\\Web Apps\\bnl-pipeline\\node_modules\\validatorjs\\src\\validator.js"}],"generated":{"js":"\"use strict\";function e(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ValidatorEngine=void 0;var n=function(){function t(a,n,r,o,c,i){e(this,t)}return a(t,[{key:\"fuzzyMatchTerm\",value:function(e,t){var a=require(\"string-similarity\").findBestMatch(e,t);return a.bestMatch.rating<=.25?\"No Match\":a.bestMatch.target}},{key:\"fuzzyMatchArray\",value:function(e,t){for(var a=[],n=0;n<e.length;n++){var r=this.fuzzyMatchTerm(e[n],t);a.push(r)}return a}},{key:\"cleanArray\",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a].replace(/[^A-Z0-9]/gi,\" \").toLowerCase();t.push(n)}return t}},{key:\"validateData\",value:function(e,t,a){var n=require(\"validatorjs\");console.log(\"validateData function\");var r=new n(e,t,a);return console.log(\"Passed validation?\",r.passes()),Object.values(r.errors.errors)}},{key:\"updateKeys\",value:function(e,t){for(var a=0;a<e.length;a++)t[a]=e[a],console.log(\"Matched \".concat(e[a],\" with \").concat(t[a]))}},{key:\"checkHeaders\",value:function(e,t,a){var n=this.fuzzyMatchArray(t.headers,a.headers),r=Object.keys(e.raw[0]);this.updateKeys(r,n),console.log(\"Old keys\",Object.keys(e.raw[0])),console.log(\"New keys\",n)}},{key:\"checkRequired\",value:function(e){console.log(\"Checking required columns are filled in\")}},{key:\"checkDataType\",value:function(e){console.log(\"Checking data types\")}},{key:\"fuzzyMatchPicklists\",value:function(e){console.log(\"Fuzzy-matching picklist columns\")}},{key:\"getSubpop\",value:function(e,t,a){for(var n=[],r=0;r<e.length;r++)if(\"single adult\"===e[r]&&\"chronic\"===t[r]&&\"no\"===a[r]){n.push(\"chronic\")}return n}}]),t}();exports.ValidatorEngine=n;"},"sourceMaps":{"js":{"mappings":[{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":0}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":13}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":22}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":24}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":26}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":29}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":34}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":47}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":50}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":56}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":60}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":70}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":107}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":116}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":118}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":120}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":123}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":127}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":131}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":133}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":135}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":137}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":139}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":146}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":150}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":151}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":155}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":157}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":159}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":162}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":164}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":175}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":177}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":190}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":192}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":194}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":208}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":210}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":220}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":224}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":226}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":236}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":239}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":246}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":261}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":263}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":265}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":269}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":273}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":282}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":284}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":286}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":288}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":291}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":298}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":301}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":303}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":305}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":315}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":318}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":321}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":323}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":325}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":328}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":330}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":337}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":352}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":360}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":373}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":374}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":381}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":385}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":393}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":414}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":416}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":420}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":422}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":433}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":442}},{"source":"validator.js","name":"state","original":{"line":3,"column":16},"generated":{"line":1,"column":444}},{"source":"validator.js","name":"dictionary","original":{"line":3,"column":23},"generated":{"line":1,"column":446}},{"source":"validator.js","name":"rules","original":{"line":3,"column":35},"generated":{"line":1,"column":448}},{"source":"validator.js","name":"input","original":{"line":3,"column":42},"generated":{"line":1,"column":450}},{"source":"validator.js","name":"metadata","original":{"line":3,"column":49},"generated":{"line":1,"column":452}},{"source":"validator.js","name":"customErrorMessages","original":{"line":3,"column":59},"generated":{"line":1,"column":454}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":457}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":459}},{"source":"validator.js","original":{"line":3,"column":80},"generated":{"line":1,"column":464}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":467}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":474}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":476}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":478}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":479}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":480}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":484}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":501}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":507}},{"source":"validator.js","name":"searchTerm","original":{"line":12,"column":19},"generated":{"line":1,"column":516}},{"source":"validator.js","name":"dictionary","original":{"line":12,"column":31},"generated":{"line":1,"column":518}},{"source":"validator.js","name":"stringSimilarity","original":{"line":13,"column":14},"generated":{"line":1,"column":521}},{"source":"validator.js","name":"a","original":{"line":14,"column":14},"generated":{"line":1,"column":525}},{"source":"validator.js","name":"require","original":{"line":13,"column":33},"generated":{"line":1,"column":527}},{"source":"validator.js","original":{"line":13,"column":41},"generated":{"line":1,"column":535}},{"source":"validator.js","name":"findBestMatch","original":{"line":14,"column":35},"generated":{"line":1,"column":556}},{"source":"validator.js","name":"searchTerm","original":{"line":14,"column":49},"generated":{"line":1,"column":570}},{"source":"validator.js","name":"dictionary","original":{"line":14,"column":61},"generated":{"line":1,"column":572}},{"source":"validator.js","name":"a","original":{"line":17,"column":12},"generated":{"line":1,"column":575}},{"source":"validator.js","name":"a","original":{"line":17,"column":12},"generated":{"line":1,"column":582}},{"source":"validator.js","name":"bestMatch","original":{"line":17,"column":14},"generated":{"line":1,"column":584}},{"source":"validator.js","name":"rating","original":{"line":17,"column":24},"generated":{"line":1,"column":594}},{"source":"validator.js","original":{"line":17,"column":34},"generated":{"line":1,"column":602}},{"source":"validator.js","original":{"line":18,"column":19},"generated":{"line":1,"column":606}},{"source":"validator.js","name":"a","original":{"line":20,"column":19},"generated":{"line":1,"column":617}},{"source":"validator.js","name":"bestMatch","original":{"line":20,"column":21},"generated":{"line":1,"column":619}},{"source":"validator.js","name":"target","original":{"line":20,"column":31},"generated":{"line":1,"column":629}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":638}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":639}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":643}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":661}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":667}},{"source":"validator.js","name":"rawArray","original":{"line":25,"column":20},"generated":{"line":1,"column":676}},{"source":"validator.js","name":"dictionary","original":{"line":25,"column":30},"generated":{"line":1,"column":678}},{"source":"validator.js","original":{"line":27,"column":13},"generated":{"line":1,"column":681}},{"source":"validator.js","name":"matchedArray","original":{"line":26,"column":14},"generated":{"line":1,"column":685}},{"source":"validator.js","name":"matchedArray","original":{"line":26,"column":14},"generated":{"line":1,"column":689}},{"source":"validator.js","original":{"line":26,"column":29},"generated":{"line":1,"column":691}},{"source":"validator.js","name":"i","original":{"line":27,"column":17},"generated":{"line":1,"column":694}},{"source":"validator.js","original":{"line":27,"column":21},"generated":{"line":1,"column":696}},{"source":"validator.js","name":"i","original":{"line":27,"column":24},"generated":{"line":1,"column":698}},{"source":"validator.js","name":"rawArray","original":{"line":27,"column":28},"generated":{"line":1,"column":700}},{"source":"validator.js","name":"length","original":{"line":27,"column":37},"generated":{"line":1,"column":702}},{"source":"validator.js","name":"i","original":{"line":27,"column":45},"generated":{"line":1,"column":709}},{"source":"validator.js","original":{"line":27,"column":50},"generated":{"line":1,"column":713}},{"source":"validator.js","name":"match","original":{"line":28,"column":18},"generated":{"line":1,"column":714}},{"source":"validator.js","name":"match","original":{"line":28,"column":18},"generated":{"line":1,"column":718}},{"source":"validator.js","original":{"line":28,"column":26},"generated":{"line":1,"column":720}},{"source":"validator.js","name":"fuzzyMatchTerm","original":{"line":28,"column":31},"generated":{"line":1,"column":725}},{"source":"validator.js","name":"rawArray","original":{"line":28,"column":46},"generated":{"line":1,"column":740}},{"source":"validator.js","name":"i","original":{"line":28,"column":55},"generated":{"line":1,"column":742}},{"source":"validator.js","name":"dictionary","original":{"line":28,"column":59},"generated":{"line":1,"column":745}},{"source":"validator.js","name":"matchedArray","original":{"line":29,"column":12},"generated":{"line":1,"column":748}},{"source":"validator.js","name":"push","original":{"line":29,"column":25},"generated":{"line":1,"column":750}},{"source":"validator.js","name":"match","original":{"line":29,"column":30},"generated":{"line":1,"column":755}},{"source":"validator.js","name":"matchedArray","original":{"line":31,"column":15},"generated":{"line":1,"column":758}},{"source":"validator.js","name":"matchedArray","original":{"line":31,"column":15},"generated":{"line":1,"column":765}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":769}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":770}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":774}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":787}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":793}},{"source":"validator.js","name":"rawArray","original":{"line":35,"column":15},"generated":{"line":1,"column":802}},{"source":"validator.js","original":{"line":37,"column":13},"generated":{"line":1,"column":805}},{"source":"validator.js","name":"cleanArr","original":{"line":36,"column":14},"generated":{"line":1,"column":809}},{"source":"validator.js","name":"cleanArr","original":{"line":36,"column":14},"generated":{"line":1,"column":813}},{"source":"validator.js","original":{"line":36,"column":25},"generated":{"line":1,"column":815}},{"source":"validator.js","name":"i","original":{"line":37,"column":17},"generated":{"line":1,"column":818}},{"source":"validator.js","original":{"line":37,"column":21},"generated":{"line":1,"column":820}},{"source":"validator.js","name":"i","original":{"line":37,"column":24},"generated":{"line":1,"column":822}},{"source":"validator.js","name":"rawArray","original":{"line":37,"column":28},"generated":{"line":1,"column":824}},{"source":"validator.js","name":"length","original":{"line":37,"column":37},"generated":{"line":1,"column":826}},{"source":"validator.js","name":"i","original":{"line":37,"column":45},"generated":{"line":1,"column":833}},{"source":"validator.js","original":{"line":37,"column":50},"generated":{"line":1,"column":837}},{"source":"validator.js","name":"cleanItem","original":{"line":38,"column":18},"generated":{"line":1,"column":838}},{"source":"validator.js","name":"cleanItem","original":{"line":38,"column":18},"generated":{"line":1,"column":842}},{"source":"validator.js","name":"rawArray","original":{"line":38,"column":30},"generated":{"line":1,"column":844}},{"source":"validator.js","name":"i","original":{"line":38,"column":39},"generated":{"line":1,"column":846}},{"source":"validator.js","name":"replace","original":{"line":38,"column":42},"generated":{"line":1,"column":849}},{"source":"validator.js","original":{"line":38,"column":50},"generated":{"line":1,"column":857}},{"source":"validator.js","original":{"line":38,"column":65},"generated":{"line":1,"column":871}},{"source":"validator.js","name":"toLowerCase","original":{"line":38,"column":70},"generated":{"line":1,"column":876}},{"source":"validator.js","name":"cleanArr","original":{"line":39,"column":12},"generated":{"line":1,"column":890}},{"source":"validator.js","name":"push","original":{"line":39,"column":21},"generated":{"line":1,"column":892}},{"source":"validator.js","name":"cleanItem","original":{"line":39,"column":26},"generated":{"line":1,"column":897}},{"source":"validator.js","name":"cleanArr","original":{"line":41,"column":15},"generated":{"line":1,"column":900}},{"source":"validator.js","name":"cleanArr","original":{"line":41,"column":15},"generated":{"line":1,"column":907}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":911}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":912}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":916}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":931}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":937}},{"source":"validator.js","name":"data","original":{"line":46,"column":17},"generated":{"line":1,"column":946}},{"source":"validator.js","name":"rules","original":{"line":46,"column":23},"generated":{"line":1,"column":948}},{"source":"validator.js","name":"customErrorMessages","original":{"line":46,"column":30},"generated":{"line":1,"column":950}},{"source":"validator.js","name":"Validator","original":{"line":47,"column":14},"generated":{"line":1,"column":953}},{"source":"validator.js","name":"Validator","original":{"line":47,"column":14},"generated":{"line":1,"column":957}},{"source":"validator.js","name":"require","original":{"line":47,"column":26},"generated":{"line":1,"column":959}},{"source":"validator.js","original":{"line":47,"column":34},"generated":{"line":1,"column":967}},{"source":"validator.js","name":"console","original":{"line":48,"column":8},"generated":{"line":1,"column":982}},{"source":"validator.js","name":"log","original":{"line":48,"column":16},"generated":{"line":1,"column":990}},{"source":"validator.js","original":{"line":48,"column":20},"generated":{"line":1,"column":994}},{"source":"validator.js","name":"validation","original":{"line":49,"column":12},"generated":{"line":1,"column":1019}},{"source":"validator.js","name":"validation","original":{"line":49,"column":12},"generated":{"line":1,"column":1023}},{"source":"validator.js","original":{"line":49,"column":25},"generated":{"line":1,"column":1025}},{"source":"validator.js","name":"Validator","original":{"line":49,"column":29},"generated":{"line":1,"column":1029}},{"source":"validator.js","name":"data","original":{"line":49,"column":39},"generated":{"line":1,"column":1031}},{"source":"validator.js","name":"rules","original":{"line":49,"column":45},"generated":{"line":1,"column":1033}},{"source":"validator.js","name":"customErrorMessages","original":{"line":49,"column":52},"generated":{"line":1,"column":1035}},{"source":"validator.js","name":"Object","original":{"line":51,"column":15},"generated":{"line":1,"column":1038}},{"source":"validator.js","name":"console","original":{"line":50,"column":8},"generated":{"line":1,"column":1045}},{"source":"validator.js","name":"log","original":{"line":50,"column":16},"generated":{"line":1,"column":1053}},{"source":"validator.js","original":{"line":50,"column":20},"generated":{"line":1,"column":1057}},{"source":"validator.js","name":"validation","original":{"line":50,"column":42},"generated":{"line":1,"column":1078}},{"source":"validator.js","name":"passes","original":{"line":50,"column":53},"generated":{"line":1,"column":1080}},{"source":"validator.js","name":"Object","original":{"line":51,"column":15},"generated":{"line":1,"column":1090}},{"source":"validator.js","name":"values","original":{"line":51,"column":22},"generated":{"line":1,"column":1097}},{"source":"validator.js","name":"validation","original":{"line":51,"column":29},"generated":{"line":1,"column":1104}},{"source":"validator.js","name":"errors","original":{"line":51,"column":40},"generated":{"line":1,"column":1106}},{"source":"validator.js","name":"errors","original":{"line":51,"column":47},"generated":{"line":1,"column":1113}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1123}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1124}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1128}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1141}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1147}},{"source":"validator.js","name":"oldArr","original":{"line":55,"column":15},"generated":{"line":1,"column":1156}},{"source":"validator.js","name":"newArr","original":{"line":55,"column":23},"generated":{"line":1,"column":1158}},{"source":"validator.js","original":{"line":56,"column":13},"generated":{"line":1,"column":1161}},{"source":"validator.js","original":{"line":56,"column":13},"generated":{"line":1,"column":1165}},{"source":"validator.js","name":"i","original":{"line":56,"column":17},"generated":{"line":1,"column":1169}},{"source":"validator.js","original":{"line":56,"column":21},"generated":{"line":1,"column":1171}},{"source":"validator.js","name":"i","original":{"line":56,"column":24},"generated":{"line":1,"column":1173}},{"source":"validator.js","name":"oldArr","original":{"line":56,"column":28},"generated":{"line":1,"column":1175}},{"source":"validator.js","name":"length","original":{"line":56,"column":35},"generated":{"line":1,"column":1177}},{"source":"validator.js","name":"i","original":{"line":56,"column":43},"generated":{"line":1,"column":1184}},{"source":"validator.js","name":"newArr","original":{"line":57,"column":12},"generated":{"line":1,"column":1188}},{"source":"validator.js","name":"i","original":{"line":57,"column":19},"generated":{"line":1,"column":1190}},{"source":"validator.js","name":"oldArr","original":{"line":57,"column":24},"generated":{"line":1,"column":1193}},{"source":"validator.js","name":"i","original":{"line":57,"column":31},"generated":{"line":1,"column":1195}},{"source":"validator.js","name":"console","original":{"line":58,"column":12},"generated":{"line":1,"column":1198}},{"source":"validator.js","name":"log","original":{"line":58,"column":20},"generated":{"line":1,"column":1206}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1210}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1221}},{"source":"validator.js","name":"oldArr","original":{"line":58,"column":35},"generated":{"line":1,"column":1228}},{"source":"validator.js","name":"i","original":{"line":58,"column":42},"generated":{"line":1,"column":1230}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1233}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1243}},{"source":"validator.js","name":"newArr","original":{"line":58,"column":53},"generated":{"line":1,"column":1250}},{"source":"validator.js","name":"i","original":{"line":58,"column":60},"generated":{"line":1,"column":1252}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1259}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1260}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1264}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1279}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1285}},{"source":"validator.js","name":"state","original":{"line":67,"column":17},"generated":{"line":1,"column":1294}},{"source":"validator.js","name":"metadata","original":{"line":67,"column":24},"generated":{"line":1,"column":1296}},{"source":"validator.js","name":"dictionary","original":{"line":67,"column":34},"generated":{"line":1,"column":1298}},{"source":"validator.js","name":"matchedHeaders","original":{"line":68,"column":12},"generated":{"line":1,"column":1301}},{"source":"validator.js","name":"matchedHeaders","original":{"line":68,"column":12},"generated":{"line":1,"column":1305}},{"source":"validator.js","original":{"line":68,"column":29},"generated":{"line":1,"column":1307}},{"source":"validator.js","name":"fuzzyMatchArray","original":{"line":68,"column":34},"generated":{"line":1,"column":1312}},{"source":"validator.js","name":"metadata","original":{"line":68,"column":50},"generated":{"line":1,"column":1328}},{"source":"validator.js","name":"headers","original":{"line":68,"column":59},"generated":{"line":1,"column":1330}},{"source":"validator.js","name":"dictionary","original":{"line":68,"column":68},"generated":{"line":1,"column":1338}},{"source":"validator.js","name":"headers","original":{"line":68,"column":79},"generated":{"line":1,"column":1340}},{"source":"validator.js","name":"originalHeaders","original":{"line":69,"column":12},"generated":{"line":1,"column":1349}},{"source":"validator.js","name":"Object","original":{"line":69,"column":30},"generated":{"line":1,"column":1351}},{"source":"validator.js","name":"keys","original":{"line":69,"column":37},"generated":{"line":1,"column":1358}},{"source":"validator.js","name":"state","original":{"line":69,"column":42},"generated":{"line":1,"column":1363}},{"source":"validator.js","name":"raw","original":{"line":69,"column":48},"generated":{"line":1,"column":1365}},{"source":"validator.js","original":{"line":69,"column":52},"generated":{"line":1,"column":1369}},{"source":"validator.js","name":"updateKeys","original":{"line":70,"column":13},"generated":{"line":1,"column":1373}},{"source":"validator.js","name":"updateKeys","original":{"line":70,"column":13},"generated":{"line":1,"column":1378}},{"source":"validator.js","name":"originalHeaders","original":{"line":70,"column":24},"generated":{"line":1,"column":1389}},{"source":"validator.js","name":"matchedHeaders","original":{"line":70,"column":41},"generated":{"line":1,"column":1391}},{"source":"validator.js","name":"console","original":{"line":71,"column":8},"generated":{"line":1,"column":1394}},{"source":"validator.js","name":"log","original":{"line":71,"column":16},"generated":{"line":1,"column":1402}},{"source":"validator.js","original":{"line":71,"column":20},"generated":{"line":1,"column":1406}},{"source":"validator.js","name":"Object","original":{"line":71,"column":32},"generated":{"line":1,"column":1417}},{"source":"validator.js","name":"keys","original":{"line":71,"column":39},"generated":{"line":1,"column":1424}},{"source":"validator.js","name":"state","original":{"line":71,"column":44},"generated":{"line":1,"column":1429}},{"source":"validator.js","name":"raw","original":{"line":71,"column":50},"generated":{"line":1,"column":1431}},{"source":"validator.js","original":{"line":71,"column":54},"generated":{"line":1,"column":1435}},{"source":"validator.js","name":"console","original":{"line":72,"column":8},"generated":{"line":1,"column":1440}},{"source":"validator.js","name":"log","original":{"line":72,"column":16},"generated":{"line":1,"column":1448}},{"source":"validator.js","original":{"line":72,"column":20},"generated":{"line":1,"column":1452}},{"source":"validator.js","name":"matchedHeaders","original":{"line":72,"column":32},"generated":{"line":1,"column":1463}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1468}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1469}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1473}},{"source":"validator.js","name":"state","original":{"line":76,"column":18},"generated":{"line":1,"column":1489}},{"source":"validator.js","name":"state","original":{"line":76,"column":18},"generated":{"line":1,"column":1495}},{"source":"validator.js","name":"state","original":{"line":76,"column":18},"generated":{"line":1,"column":1504}},{"source":"validator.js","name":"console","original":{"line":77,"column":8},"generated":{"line":1,"column":1507}},{"source":"validator.js","name":"log","original":{"line":77,"column":16},"generated":{"line":1,"column":1515}},{"source":"validator.js","original":{"line":77,"column":20},"generated":{"line":1,"column":1519}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1564}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1565}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1569}},{"source":"validator.js","name":"state","original":{"line":81,"column":18},"generated":{"line":1,"column":1585}},{"source":"validator.js","name":"state","original":{"line":81,"column":18},"generated":{"line":1,"column":1591}},{"source":"validator.js","name":"state","original":{"line":81,"column":18},"generated":{"line":1,"column":1600}},{"source":"validator.js","name":"console","original":{"line":82,"column":8},"generated":{"line":1,"column":1603}},{"source":"validator.js","name":"log","original":{"line":82,"column":16},"generated":{"line":1,"column":1611}},{"source":"validator.js","original":{"line":82,"column":20},"generated":{"line":1,"column":1615}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1640}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1641}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1645}},{"source":"validator.js","name":"state","original":{"line":86,"column":24},"generated":{"line":1,"column":1667}},{"source":"validator.js","name":"state","original":{"line":86,"column":24},"generated":{"line":1,"column":1673}},{"source":"validator.js","name":"state","original":{"line":86,"column":24},"generated":{"line":1,"column":1682}},{"source":"validator.js","name":"console","original":{"line":87,"column":8},"generated":{"line":1,"column":1685}},{"source":"validator.js","name":"log","original":{"line":87,"column":16},"generated":{"line":1,"column":1693}},{"source":"validator.js","original":{"line":87,"column":20},"generated":{"line":1,"column":1697}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1734}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1735}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1739}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1751}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1757}},{"source":"validator.js","name":"householdType","original":{"line":91,"column":14},"generated":{"line":1,"column":1766}},{"source":"validator.js","name":"chronicArray","original":{"line":91,"column":29},"generated":{"line":1,"column":1768}},{"source":"validator.js","name":"veteranArray","original":{"line":91,"column":43},"generated":{"line":1,"column":1770}},{"source":"validator.js","original":{"line":93,"column":13},"generated":{"line":1,"column":1773}},{"source":"validator.js","name":"subpopArray","original":{"line":92,"column":14},"generated":{"line":1,"column":1777}},{"source":"validator.js","name":"subpopArray","original":{"line":92,"column":14},"generated":{"line":1,"column":1781}},{"source":"validator.js","original":{"line":92,"column":28},"generated":{"line":1,"column":1783}},{"source":"validator.js","name":"i","original":{"line":93,"column":17},"generated":{"line":1,"column":1786}},{"source":"validator.js","original":{"line":93,"column":21},"generated":{"line":1,"column":1788}},{"source":"validator.js","name":"i","original":{"line":93,"column":24},"generated":{"line":1,"column":1790}},{"source":"validator.js","name":"householdType","original":{"line":93,"column":28},"generated":{"line":1,"column":1792}},{"source":"validator.js","name":"length","original":{"line":93,"column":42},"generated":{"line":1,"column":1794}},{"source":"validator.js","name":"i","original":{"line":93,"column":50},"generated":{"line":1,"column":1801}},{"source":"validator.js","name":"householdType","original":{"line":94,"column":16},"generated":{"line":1,"column":1805}},{"source":"validator.js","original":{"line":94,"column":37},"generated":{"line":1,"column":1808}},{"source":"validator.js","name":"householdType","original":{"line":94,"column":16},"generated":{"line":1,"column":1825}},{"source":"validator.js","name":"i","original":{"line":94,"column":30},"generated":{"line":1,"column":1827}},{"source":"validator.js","original":{"line":94,"column":75},"generated":{"line":1,"column":1831}},{"source":"validator.js","name":"chronicArray","original":{"line":94,"column":55},"generated":{"line":1,"column":1843}},{"source":"validator.js","name":"i","original":{"line":94,"column":68},"generated":{"line":1,"column":1845}},{"source":"validator.js","original":{"line":94,"column":108},"generated":{"line":1,"column":1849}},{"source":"validator.js","name":"veteranArray","original":{"line":94,"column":88},"generated":{"line":1,"column":1856}},{"source":"validator.js","name":"i","original":{"line":94,"column":101},"generated":{"line":1,"column":1858}},{"source":"validator.js","original":{"line":94,"column":114},"generated":{"line":1,"column":1861}},{"source":"validator.js","name":"subpopArray","original":{"line":96,"column":16},"generated":{"line":1,"column":1862}},{"source":"validator.js","name":"push","original":{"line":96,"column":28},"generated":{"line":1,"column":1864}},{"source":"validator.js","original":{"line":95,"column":24},"generated":{"line":1,"column":1869}},{"source":"validator.js","name":"subpopArray","original":{"line":99,"column":15},"generated":{"line":1,"column":1880}},{"source":"validator.js","name":"subpopArray","original":{"line":99,"column":15},"generated":{"line":1,"column":1887}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1893}},{"source":"validator.js","name":"ValidatorEngine","original":{"line":1,"column":6},"generated":{"line":1,"column":1895}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1898}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1906}},{"source":"validator.js","original":{"line":100,"column":5},"generated":{"line":1,"column":1922}}],"sources":{"validator.js":"class ValidatorEngine {\r\n\r\n    constructor(state, dictionary, rules, input, metadata, customErrorMessages) {\r\n\r\n    }\r\n\r\n\r\n\r\n    /* HELPER FUNCTIONS */\r\n\r\n    // Return the single dictionary term that most closely resembles the search term\r\n    fuzzyMatchTerm(searchTerm, dictionary) {\r\n        const stringSimilarity = require('string-similarity');\r\n        const a = stringSimilarity.findBestMatch(searchTerm, dictionary);\r\n\r\n        // If the Dice's coefficient falls below threshold, return null\r\n        if (a.bestMatch.rating <= 0.25) {\r\n            return \"No Match\"\r\n        } else {\r\n            return a.bestMatch.target;\r\n        }\r\n    }\r\n\r\n    // Takes a raw array and dictionary and returns a fuzzy-matched array\r\n    fuzzyMatchArray(rawArray, dictionary) {\r\n        const matchedArray = [];\r\n        for (let i = 0; i < rawArray.length; i++) {\r\n            const match = this.fuzzyMatchTerm(rawArray[i], dictionary);\r\n            matchedArray.push(match);\r\n        }\r\n        return matchedArray;\r\n    }\r\n\r\n    // For every item in the array, change to lowercase and remove special characters. Returns newly cleaned array\r\n    cleanArray(rawArray) {\r\n        const cleanArr = [];\r\n        for (let i = 0; i < rawArray.length; i++) {\r\n            const cleanItem = rawArray[i].replace(/[^A-Z0-9]/ig, \" \").toLowerCase()\r\n            cleanArr.push(cleanItem)\r\n        }\r\n        return cleanArr;\r\n    }\r\n\r\n\r\n    // Validates a data source against a set of rules, and then returns pass / fail\r\n    validateData(data, rules, customErrorMessages) {\r\n        const Validator = require('validatorjs');\r\n        console.log(\"validateData function\")\r\n        let validation = new Validator(data, rules, customErrorMessages)\r\n        console.log(\"Passed validation?\", validation.passes())\r\n        return Object.values(validation.errors.errors)\r\n    }\r\n\r\n    // Updates an object's keys\r\n    updateKeys(oldArr, newArr) {\r\n        for (let i = 0; i < oldArr.length; i++) {\r\n            newArr[i] = oldArr[i];\r\n            console.log(`Matched ${oldArr[i]} with ${newArr[i]}`)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /* VALIDATION FUNCTIONS */\r\n\r\n    // Checks that the data file contains the right headers\r\n    checkHeaders(state, metadata, dictionary) {\r\n        let matchedHeaders = this.fuzzyMatchArray(metadata.headers, dictionary.headers)\r\n        let originalHeaders = Object.keys(state.raw[0])\r\n        this.updateKeys(originalHeaders, matchedHeaders)\r\n        console.log(\"Old keys\", Object.keys(state.raw[0]))\r\n        console.log(\"New keys\", matchedHeaders)\r\n    }\r\n\r\n    // Checks that required columns are 100% filled in\r\n    checkRequired(state) {\r\n        console.log(\"Checking required columns are filled in\")\r\n    }\r\n\r\n    // Checks that each column contains the right data type\r\n    checkDataType(state) {\r\n        console.log(\"Checking data types\")\r\n    }\r\n\r\n    // Generates a fuzzy-matched version of each picklist column\r\n    fuzzyMatchPicklists(state) {\r\n        console.log(\"Fuzzy-matching picklist columns\")\r\n    }\r\n\r\n    // Calculates subpopulation from fuzzy-matched chronic and veteran status\r\n    getSubpop(householdType, chronicArray, veteranArray) {\r\n        const subpopArray = [];\r\n        for (let i = 0; i < householdType.length; i++) {\r\n            if (householdType[i] === \"single adult\" && chronicArray[i] === \"chronic\" && veteranArray[i] === \"no\") {\r\n                let s = \"chronic\";\r\n                subpopArray.push(s);\r\n            }\r\n        }\r\n        return subpopArray;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport {\r\n    ValidatorEngine\r\n};"},"lineCount":null}},"error":null,"hash":"b62f20e7d5626044c87c9c15443ebeff","cacheData":{"env":{}}}